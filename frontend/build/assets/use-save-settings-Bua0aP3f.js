import{u as s}from"./open-hands-axios-BHmDa7Dt.js";import{u as c}from"./brand-button-BwmgTwuO.js";import{p as i}from"./module-D8R257Cm.js";import{u,D as r}from"./use-settings-Ds8Eg1n4.js";import{O as S}from"./open-hands-C0cV1FsE.js";const m=async _=>{const a={llm_model:_.LLM_MODEL,llm_base_url:_.LLM_BASE_URL,agent:_.AGENT||r.AGENT,language:_.LANGUAGE||r.LANGUAGE,confirmation_mode:_.CONFIRMATION_MODE,security_analyzer:_.SECURITY_ANALYZER,llm_api_key:_.llm_api_key===""?"":_.llm_api_key?.trim()||void 0,remote_runtime_resource_factor:_.REMOTE_RUNTIME_RESOURCE_FACTOR,enable_default_condenser:_.ENABLE_DEFAULT_CONDENSER,enable_sound_notifications:_.ENABLE_SOUND_NOTIFICATIONS,user_consents_to_analytics:_.user_consents_to_analytics,provider_tokens_set:_.PROVIDER_TOKENS_SET,mcp_config:_.MCP_CONFIG,enable_proactive_conversation_starters:_.ENABLE_PROACTIVE_CONVERSATION_STARTERS,enable_solvability_analysis:_.ENABLE_SOLVABILITY_ANALYSIS,search_api_key:_.SEARCH_API_KEY?.trim()||"",max_budget_per_task:_.MAX_BUDGET_PER_TASK,git_user_name:_.GIT_USER_NAME?.trim()||r.GIT_USER_NAME,git_user_email:_.GIT_USER_EMAIL?.trim()||r.GIT_USER_EMAIL};await S.saveSettings(a)},T=()=>{const _=s(),{data:a}=u();return c({mutationFn:async e=>{const o={...a,...e};if(e.MCP_CONFIG&&a?.MCP_CONFIG!==e.MCP_CONFIG){const n=!!e.MCP_CONFIG,E=e.MCP_CONFIG?.sse_servers?.length||0,t=e.MCP_CONFIG?.stdio_servers?.length||0;i.capture("mcp_config_updated",{has_mcp_config:n,sse_servers_count:E,stdio_servers_count:t})}await m(o)},onSuccess:async()=>{await _.invalidateQueries({queryKey:["settings"]})},meta:{disableToast:!0}})};export{T as u};
