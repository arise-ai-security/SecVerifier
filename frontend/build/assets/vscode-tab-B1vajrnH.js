import{w as x}from"./with-props-CpQmc7fE.js";import{p as r,o as e}from"./chunk-BAXFHI7N-C1aCn8M0.js";import{a as R}from"./react-redux-bUW3E-1D.js";import{u as S}from"./conversation-context-C7l2I9sq.js";import{I as s}from"./declaration-Be1JuYcO.js";import{R as h}from"./agent-state-u5yf9HVO.js";import{u as p}from"./useTranslation-D6EhfAhY.js";import"./i18nInstance-CHFDjdcJ.js";function T(){const{t}=p(),{conversationId:l}=S(),[i,m]=r.useState(null),[E,a]=r.useState(!0),[c,u]=r.useState(null),{curAgentState:I}=R(o=>o.agent),n=h.includes(I);return r.useEffect(()=>{async function o(){if(!(!l||n))try{a(!0);const f=await(await fetch(`/api/conversations/${l}/vscode-url`)).json();f.vscode_url?m(f.vscode_url):u(t(s.VSCODE$URL_NOT_AVAILABLE))}catch{u(t(s.VSCODE$FETCH_ERROR))}finally{a(!1)}}o()},[l,n,t]),n?e.jsx("div",{className:"w-full h-full flex items-center text-center justify-center text-2xl text-tertiary-light",children:t("DIFF_VIEWER$WAITING_FOR_RUNTIME")}):E?e.jsx("div",{className:"w-full h-full flex items-center text-center justify-center text-2xl text-tertiary-light",children:t("DIFF_VIEWER$WAITING_FOR_RUNTIME")}):c||!i?e.jsx("div",{className:"w-full h-full flex items-center text-center justify-center text-2xl text-tertiary-light",children:c||t(s.VSCODE$URL_NOT_AVAILABLE)}):e.jsx("div",{className:"h-full w-full",children:e.jsx("iframe",{title:t(s.VSCODE$TITLE),src:i,className:"w-full h-full border-0",allow:t(s.VSCODE$IFRAME_PERMISSIONS)})})}const w=x(T);export{w as default};
