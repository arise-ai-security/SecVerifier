import{a as a1,w as o1}from"./with-props-CpQmc7fE.js";import{p as m,r as l,o as e,s as D,t as r1,v as i1,N as W,w as l1,x as c1,O as d1,y as C1,z as u1}from"./chunk-BAXFHI7N-C1aCn8M0.js";import{I as r}from"./declaration-Be1JuYcO.js";import{i as m1}from"./index-Ce6tqe-R.js";import{u as P}from"./auth-context-QvFmluSo.js";import{u as U}from"./open-hands-axios-DmXtiBSx.js";import{O as M}from"./open-hands--YlJ3f3i.js";import{u as R}from"./use-config-D8tLtqcY.js";import{F as h1}from"./index-DzSU5UgY.js";import{u as p1}from"./react-redux-bUW3E-1D.js";import{b}from"./module-CmhJwC8X.js";import{u as z,a as $,M as f1,o as x1,K as E1,H as g1,b as S1,h as y}from"./handle-capture-consent-Ds16U-94.js";import{L as G}from"./loading-spinner-CRauKqNm.js";import{c as k}from"./utils-CsA7xLXy.js";import{u as p}from"./useTranslation-D6EhfAhY.js";import{t as N1,u as q,C as L1,a as A1,B as _1,b as B,M as w,c as F,d as Q,e as Z,f as T1,g as I1,T as v1}from"./use-update-conversation-Bu00AxpA.js";import{S as j1}from"./settings-DUz3sH1X.js";import{M as I}from"./modal-backdrop-BkQnjy5a.js";import{B as T,u as X}from"./brand-button-Chc-dr4s.js";import{S as O1}from"./settings-input-CZ580Raz.js";import{D as M1,u as J}from"./use-settings-TDHcUM0x.js";import{u as w1}from"./QueryClientProvider-DzZUh9st.js";import{s as b1}from"./chat-slice-DY3EInnc.js";import{A as y1}from"./agent-state-u5yf9HVO.js";import{R as k1}from"./index-BP-02qgu.js";import{d as e1,a as R1}from"./custom-toast-handlers-xKzFdWix.js";import{u as D1}from"./use-balance-Cn6oIvKR.js";import"./preload-helper-ckwbz45p.js";import"./i18nInstance-CHFDjdcJ.js";import"./iconBase-Byyvnogp.js";import"./chunk-DNIGSRME-C0GitgCW.js";import"./initial-query-slice-gsFlMgcr.js";import"./mutation-BLcRjgsX.js";import"./optional-tag-xyWOVPWY.js";import"./index-CO93yzRA.js";const P1=(t,s)=>{const n=`${s.origin}/oauth/keycloak/callback`;return`https://${s.hostname.replace(/(^|\.)staging\.all-hands\.dev$/,"$1auth.staging.all-hands.dev").replace(/(^|\.)app\.all-hands\.dev$/,"auth.app.all-hands.dev").replace(/(^|\.)localhost$/,"auth.staging.all-hands.dev")}/realms/allhands/protocol/openid-connect/auth?client_id=allhands&kc_idp_hint=${t}&response_type=code&redirect_uri=${encodeURIComponent(n)}&scope=${encodeURIComponent("openid email profile")}`},t1=t=>{const{providersAreSet:s}=P();return m.useMemo(()=>{if(t.appMode==="saas"&&!s)try{return P1(t.identityProvider,new URL(window.location.href))}catch{return null}return null},[s,t.appMode,t.identityProvider])},U1=t=>t1({appMode:t.appMode,identityProvider:"github"}),s1=()=>{const{providersAreSet:t}=P(),{data:s}=R(),n=m.useMemo(()=>s==null?void 0:s.APP_MODE,[s]);return U({queryKey:["user","authenticated",t,n],queryFn:()=>M.authenticate(n),enabled:!!n,staleTime:1e3*60*5,gcTime:1e3*60*15,retry:!1,meta:{disableToast:!0}})},$1=()=>{const{providersAreSet:t,providerTokensSet:s}=P(),{mutateAsync:n}=z(),{data:a}=R(),o=U({queryKey:["user",s],queryFn:M.getGitUser,enabled:t&&!!(a!=null&&a.APP_MODE),retry:!1,staleTime:1e3*60*5,gcTime:1e3*60*15});m.useEffect(()=>{o.data&&b.identify(o.data.login,{company:o.data.company,name:o.data.name,email:o.data.email,user:o.data.login,mode:(a==null?void 0:a.APP_MODE)||"oss"})},[o.data]);const i=async()=>{await n(),b.reset()};return m.useEffect(()=>{o.isError&&i()},[o.isError]),o},G1=t=>l.createElement("svg",{width:27,height:26,viewBox:"0 0 27 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},l.createElement("g",{clipPath:"url(#clip0_40000158_426)"},l.createElement("path",{d:"M13.5381 1.83496C7.32618 1.83496 2.29074 6.8704 2.29074 13.0823C2.29074 19.2942 7.32618 24.3297 13.5381 24.3297C19.75 24.3297 24.7855 19.2942 24.7855 13.0823C24.7855 6.8704 19.75 1.83496 13.5381 1.83496Z",stroke:"currentColor",strokeWidth:1.8,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M4.84641 20.22C4.84641 20.22 7.35344 17.019 13.5395 17.019C19.7255 17.019 22.2337 20.22 22.2337 20.22M13.5395 13.0824C14.4344 13.0824 15.2926 12.7269 15.9254 12.0941C16.5582 11.4613 16.9137 10.6031 16.9137 9.70819C16.9137 8.8133 16.5582 7.95505 15.9254 7.32227C15.2926 6.68948 14.4344 6.33398 13.5395 6.33398C12.6446 6.33398 11.7863 6.68948 11.1536 7.32227C10.5208 7.95505 10.1653 8.8133 10.1653 9.70819C10.1653 10.6031 10.5208 11.4613 11.1536 12.0941C11.7863 12.7269 12.6446 13.0824 13.5395 13.0824Z",stroke:"currentColor",strokeWidth:1.8,strokeLinecap:"round",strokeLinejoin:"round"})),l.createElement("defs",null,l.createElement("clipPath",{id:"clip0_40000158_426"},l.createElement("rect",{width:26,height:26,fill:"white",transform:"translate(0.5)"}))));function B1({src:t}){const{t:s}=p();return e.jsx("img",{src:t,alt:s(r.AVATAR$ALT_TEXT),className:"w-full h-full rounded-full"})}function j({children:t,tooltip:s,onClick:n,href:a,ariaLabel:o,testId:i,className:c}){const d=e.jsx("button",{type:"button","aria-label":o,"data-testid":i,onClick:n,className:k("hover:opacity-80",c),children:t}),u=a?e.jsx("a",{href:a,target:"_blank",rel:"noreferrer noopener",className:k("hover:opacity-80",c),"aria-label":o,children:t}):d;return e.jsx(N1,{content:s,closeDelay:100,placement:"right",children:u})}function F1({onClick:t,avatarUrl:s,isLoading:n}){const{t:a}=p();return e.jsxs(j,{testId:"user-avatar",tooltip:a(r.USER$ACCOUNT_SETTINGS),ariaLabel:a(r.USER$ACCOUNT_SETTINGS),onClick:t,className:k("w-8 h-8 rounded-full flex items-center justify-center",n&&"bg-transparent"),children:[!n&&s&&e.jsx(B1,{src:s}),!n&&!s&&e.jsx(G1,{"aria-label":a(r.USER$AVATAR_PLACEHOLDER),width:28,height:28,className:"text-[#9099AC]"}),n&&e.jsx(G,{size:"small"})]})}function V1({onLogout:t,onClose:s,isLoggedIn:n}){const a=q(s),{t:o}=p();return e.jsx(L1,{testId:"account-settings-context-menu",ref:a,className:"absolute right-full md:left-full -top-1 z-10 w-fit",children:e.jsx(A1,{onClick:t,isDisabled:!n,children:o(r.ACCOUNT_SETTINGS$LOGOUT)})})}function H1({onLogout:t,user:s,isLoading:n}){const[a,o]=m.useState(!1),i=()=>{o(u=>!u)},c=()=>{o(!1)},d=()=>{t(),c()};return e.jsxs("div",{"data-testid":"user-actions",className:"w-8 h-8 relative",children:[e.jsx(F1,{avatarUrl:s==null?void 0:s.avatar_url,onClick:i,isLoading:n}),a&&e.jsx(V1,{isLoggedIn:!!s,onLogout:d,onClose:c})]})}const V=t=>l.createElement("svg",{width:39,height:26,viewBox:"0 0 39 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},l.createElement("g",{clipPath:"url(#clip0_12391_446)"},l.createElement("g",{clipPath:"url(#clip1_12391_446)"},l.createElement("path",{d:"M37.4642 7.79821C36.2186 7.05244 35.3865 8.1954 35.4886 9.74729L35.4782 9.75902C35.4816 8.13842 35.2567 6.34856 34.5094 4.90057C34.2447 4.38775 33.7084 3.54477 32.648 3.94196C32.1826 4.11625 31.7605 4.64081 31.9785 5.99494C31.9785 5.99494 32.2207 7.41611 32.1757 9.20262V9.22776C31.873 4.3006 30.7312 2.79731 29.0981 2.89451C28.5757 2.98501 27.8612 3.20456 28.1017 4.71958C28.1017 4.71958 28.3629 6.29995 28.4477 7.55856L28.4529 7.62224H28.4477C27.6796 4.9056 26.6451 4.86873 25.896 4.97431C25.2161 5.06984 24.474 5.75696 24.8494 7.11109C26.0275 11.3595 25.7974 16.4761 25.7092 17.2084C25.4687 16.7073 25.3943 16.3101 25.0604 15.7604C23.718 13.5533 23.0796 13.3907 22.296 13.3572C21.5175 13.3237 20.6767 13.7913 20.7321 14.6812C20.7892 15.5711 21.2545 15.7185 21.9154 16.9587C22.4309 17.924 22.5779 19.1893 23.6159 21.4887C24.4757 23.3925 26.7229 25.4807 30.816 25.2327C34.1323 25.1254 39.0851 23.9958 38.2236 16.5783C38.0091 15.2895 38.17 14.2102 38.2824 13.1041C38.4572 11.388 38.7132 8.54399 37.4659 7.79654L37.4642 7.79821Z",fill:"#FFE165"}),l.createElement("path",{d:"M16.7567 13.4091C15.973 13.4577 15.3399 13.6303 14.039 15.8609C13.7155 16.4157 13.6497 16.8145 13.4179 17.319C13.3158 16.5883 12.9889 11.4768 14.0857 7.20822C14.4351 5.84906 13.6809 5.17535 12.9993 5.09156C12.2485 4.99938 11.2122 5.05469 10.496 7.79814H10.4874L10.4977 7.71938C10.5583 6.4591 10.7901 4.87536 10.7901 4.87536C10.9994 3.35532 10.2832 3.14918 9.75905 3.06706C8.12944 3.00003 7.01881 4.51002 6.8043 9.3936H6.80084C6.72645 7.62552 6.93923 6.21776 6.93923 6.21776C7.13126 4.8586 6.69877 4.34243 6.22995 4.17651C5.16258 3.79776 4.64186 4.65079 4.38756 5.16865C3.6679 6.63004 3.47587 8.42326 3.51047 10.0439L3.50009 10.0321C3.57102 8.47856 2.71816 7.35068 1.48643 8.11824C0.254707 8.88748 0.564368 11.7265 0.771962 13.4392C0.906898 14.5437 1.08681 15.6196 0.896519 16.9117C0.176859 24.3427 5.15047 25.3834 8.46851 25.432C12.565 25.608 14.7725 23.4779 15.5959 21.559C16.5889 19.2429 16.7135 17.9742 17.2099 17.0005C17.8466 15.7486 18.3102 15.5928 18.35 14.7029C18.3898 13.813 17.5404 13.3605 16.7619 13.4074L16.7567 13.4091Z",fill:"#FFE165"}),l.createElement("path",{d:"M18.3964 13.4209C17.9812 13.027 17.3567 12.8176 16.7218 12.8544C15.7046 12.9164 14.9832 13.2768 13.8743 15.0365C13.8449 13.0237 13.9608 10.002 14.6424 7.34405C14.8984 6.34521 14.6406 5.69328 14.3777 5.3229C14.0715 4.89052 13.5958 4.60562 13.0699 4.54193C12.5907 4.48328 11.9644 4.47992 11.3537 4.96594C11.3537 4.95923 11.3555 4.95085 11.3555 4.95085C11.5527 3.52298 11.0441 2.70514 9.84523 2.52079L9.77949 2.51409C9.0408 2.48224 8.40764 2.71687 7.8973 3.20959C7.62397 3.4727 7.38697 3.81291 7.1811 4.23357C6.95102 3.90676 6.6552 3.74085 6.42165 3.65705C4.99445 3.14925 4.20559 4.23692 3.86306 4.93074C3.46517 5.73853 3.21779 6.64352 3.07939 7.56694C3.04998 7.54851 3.0223 7.53007 2.99289 7.51331C2.67804 7.33734 2.02239 7.12283 1.17126 7.65409C-0.271523 8.55573 -0.0881482 11.1467 0.199024 13.5064C0.214593 13.632 0.230163 13.7561 0.245732 13.8818C0.368559 14.8488 0.484465 15.7621 0.32531 16.8364L0.32185 16.8632C0.0329484 19.8446 0.612482 22.1389 2.04488 23.6858C3.42192 25.174 5.57917 25.9483 8.43878 25.9902C8.6481 25.9986 8.85223 26.0019 9.05118 26.0002C13.9366 25.9567 15.689 22.7808 16.1198 21.7753C16.6768 20.4748 16.9657 19.5044 17.1958 18.7234C17.374 18.1201 17.5158 17.6442 17.7165 17.2486C17.9449 16.7995 18.1455 16.5079 18.322 16.2498C18.623 15.8107 18.8825 15.432 18.9136 14.7281C18.9361 14.2186 18.7562 13.7661 18.3912 13.4209H18.3964ZM8.70865 3.99726C8.98371 3.73247 9.30029 3.61516 9.70164 3.62354C10.0494 3.67884 10.3642 3.76096 10.2206 4.80002C10.2102 4.86538 9.98535 6.42565 9.9248 7.69599C9.9248 7.70437 9.9248 7.71275 9.9248 7.72113C9.60822 8.9613 9.34354 10.7478 9.20168 13.3589C8.58755 13.3957 7.97515 13.4594 7.38005 13.5432C7.18802 8.24568 7.63262 5.03297 8.70692 3.99726H8.70865ZM4.90103 5.41005C5.33179 4.53858 5.69335 4.58215 6.02896 4.70114C6.49431 4.86706 6.42166 5.76702 6.36803 6.14075C6.35938 6.20108 6.15178 7.60381 6.22444 9.38865C6.17081 10.6406 6.17773 12.0835 6.24174 13.7343C5.67259 13.8432 5.13284 13.9689 4.63981 14.1047C4.40626 13.3438 3.37348 8.51048 4.90103 5.41173V5.41005ZM17.3705 15.6348C17.1837 15.9062 16.9519 16.2448 16.6906 16.7576C16.4433 17.2419 16.291 17.7615 16.0955 18.4168C15.8724 19.1692 15.5939 20.1061 15.0628 21.3479C14.6856 22.2261 13.101 25.0785 8.47338 24.8774C5.89402 24.8405 4.07065 24.207 2.89948 22.9417C1.69197 21.6378 1.20931 19.6301 1.46362 16.9772C1.64007 15.7638 1.51033 14.7365 1.38404 13.7443C1.36847 13.6203 1.3529 13.498 1.33733 13.374C1.19893 12.2293 0.828725 9.18754 1.79231 8.58589C2.0518 8.42333 2.26458 8.38646 2.42201 8.47361C2.69015 8.62276 2.96002 9.16576 2.92197 10.0071C2.92024 10.0523 2.92543 10.0959 2.93407 10.1395C2.98251 12.1003 3.34407 13.8063 3.54994 14.4465C3.2126 14.5689 2.91505 14.6962 2.66593 14.8236C2.38568 14.9677 2.28015 15.3029 2.42893 15.5744C2.53273 15.7638 2.7334 15.8711 2.94099 15.8694C3.02922 15.8694 3.11918 15.8476 3.20395 15.804C4.60348 15.0851 7.92325 14.3544 10.8486 14.4331C11.1669 14.4382 11.4281 14.2002 11.4368 13.8935C11.4454 13.5868 11.1963 13.3321 10.8797 13.3237C10.705 13.3187 10.5286 13.3187 10.3521 13.3187C10.6445 8.05295 11.4489 6.33515 12.0751 5.82735C12.3346 5.61786 12.582 5.6011 12.9245 5.643C13.0197 5.65473 13.2584 5.70836 13.4297 5.94969C13.6148 6.21281 13.6494 6.60162 13.5283 7.07423C12.4696 11.1986 12.7083 16.0487 12.8294 17.2252C12.8086 17.2654 12.7896 17.3056 12.7671 17.3475C12.5197 17.7983 12.0596 18.2676 11.5112 18.2358C11.198 18.2207 10.923 18.4519 10.904 18.757C10.8849 19.0637 11.1254 19.3268 11.442 19.3452C12.3692 19.3988 13.2428 18.8475 13.7791 17.8704C13.8362 17.7665 13.8847 17.6676 13.9279 17.5721C13.9314 17.5654 13.9348 17.557 13.9383 17.5503C14.0386 17.3324 14.1113 17.133 14.1753 16.9537C14.2756 16.6755 14.3621 16.4342 14.5351 16.1358C15.7634 14.0276 16.2616 13.9974 16.7892 13.9655C17.0989 13.9471 17.4068 14.0426 17.5885 14.2169C17.7182 14.3393 17.7753 14.4918 17.7667 14.6828C17.7494 15.0767 17.6369 15.2409 17.3653 15.6364L17.3705 15.6348Z",fill:"black"}),l.createElement("path",{d:"M38.7854 16.4908C38.6072 15.4199 38.7058 14.5049 38.8096 13.5362C38.8235 13.4105 38.8373 13.2865 38.8494 13.1608C39.0916 10.7978 39.2265 8.20179 37.7647 7.32697C36.9032 6.81079 36.251 7.03704 35.9396 7.21803C35.9102 7.23479 35.8825 7.2549 35.8531 7.27334C35.6957 6.35327 35.4328 5.4533 35.0193 4.65222C34.6647 3.9651 33.8568 2.89084 32.4382 3.42378C32.2064 3.51093 31.9158 3.68187 31.6909 4.0137C31.4764 3.5964 31.2324 3.26122 30.9539 3.00313C30.4349 2.52047 29.7966 2.2959 29.0596 2.34115L28.9939 2.34785C27.7985 2.55399 27.3055 3.38021 27.5303 4.80808C27.5303 4.80808 27.5303 4.81478 27.5321 4.81981C26.9128 4.34385 26.2865 4.35894 25.809 4.42597C25.2849 4.49971 24.8143 4.793 24.5168 5.23041C24.2625 5.60581 24.0151 6.26109 24.2902 7.2549C25.0236 9.90116 25.1966 12.9211 25.2053 14.9339C24.0635 13.1943 23.3352 12.8474 22.318 12.8038C21.6848 12.777 21.0603 12.9999 20.6538 13.4004C20.2957 13.7524 20.1244 14.2082 20.1573 14.716C20.2023 15.4182 20.4687 15.7936 20.7784 16.226C20.96 16.4808 21.1659 16.769 21.4029 17.2131C21.6122 17.6053 21.7627 18.0779 21.953 18.6779C22.1986 19.4538 22.5048 20.4191 23.0878 21.7096C23.5376 22.7068 25.3506 25.8524 30.2221 25.8072C30.4194 25.8055 30.6235 25.7988 30.8311 25.7854C33.7063 25.6932 35.8479 24.8787 37.1973 23.3671C38.5986 21.7951 39.1349 19.4907 38.7906 16.5143L38.7871 16.4875L38.7854 16.4908ZM32.542 5.91083C32.4815 5.53207 32.3898 4.63379 32.8534 4.46117C33.1856 4.33548 33.5488 4.28687 33.9952 5.14997C35.5815 8.2219 34.6422 13.0736 34.4225 13.8379C33.926 13.7105 33.3845 13.5949 32.8136 13.496C32.8448 11.8452 32.824 10.4006 32.7479 9.15035C32.7859 7.36551 32.5524 5.96613 32.542 5.91083ZM29.16 3.44892C29.563 3.43216 29.8813 3.54445 30.1599 3.80589C31.2532 4.82316 31.7601 8.02582 31.6684 13.3267C31.0716 13.253 30.4592 13.201 29.8433 13.1742C29.653 10.5648 29.3537 8.78501 29.0129 7.54986C29.0129 7.54148 29.0129 7.5331 29.0129 7.52472C28.9281 6.25439 28.6721 4.69915 28.6617 4.63881C28.4974 3.59808 28.8105 3.51093 29.1582 3.44892H29.16ZM37.6523 16.6551C37.9568 19.303 37.5122 21.3191 36.3306 22.6447C35.1836 23.9302 33.3724 24.5972 30.7775 24.681C26.1758 24.9625 24.5323 22.1403 24.1396 21.2688C23.5826 20.0354 23.2868 19.1052 23.0498 18.3561C22.8422 17.7025 22.6796 17.188 22.4235 16.707C22.1537 16.1992 21.9149 15.8657 21.7229 15.5976C21.4444 15.2071 21.3285 15.0445 21.3025 14.6507C21.2904 14.4596 21.3458 14.3054 21.4721 14.1814C21.652 14.0038 21.9564 13.9015 22.2678 13.9166C22.7955 13.9401 23.2937 13.9602 24.5635 16.0467C24.7434 16.3417 24.8334 16.5813 24.9389 16.8578C25.0081 17.0372 25.0842 17.2366 25.1897 17.4528C25.1932 17.4595 25.1949 17.4662 25.1984 17.4712C25.2451 17.5668 25.2953 17.664 25.3541 17.7679C25.9094 18.7349 26.7934 19.2711 27.7189 19.2008C28.0338 19.1773 28.2708 18.9092 28.2465 18.6041C28.2223 18.2991 27.9473 18.0729 27.6307 18.093C27.0823 18.1332 26.6135 17.6723 26.3574 17.2265C26.3332 17.1846 26.3142 17.1461 26.2934 17.1059C26.392 15.9294 26.5391 11.0743 25.4008 6.97C25.2693 6.49907 25.297 6.11026 25.4769 5.84379C25.6447 5.59911 25.8817 5.54045 25.9769 5.52704C26.3177 5.47844 26.5668 5.49185 26.8297 5.69631C27.4663 6.19406 28.3036 7.89678 28.6946 13.1558C28.5181 13.1574 28.3417 13.1625 28.1687 13.1708C27.8521 13.1843 27.6082 13.444 27.622 13.7507C27.6359 14.0574 27.8988 14.2887 28.2206 14.2803C31.1425 14.1496 34.4778 14.8199 35.8895 15.5154C35.9742 15.5573 36.0642 15.5758 36.1541 15.5758C36.3617 15.5741 36.5607 15.4635 36.661 15.2708C36.8046 14.9976 36.6922 14.6624 36.4085 14.5233C36.1576 14.3993 35.8566 14.2786 35.5175 14.1613C35.7113 13.5178 36.0417 11.805 36.0521 9.84418C36.0607 9.8006 36.0642 9.75703 36.0607 9.71178C36.0054 8.87215 36.2666 8.32413 36.5313 8.16995C36.687 8.07945 36.8998 8.11297 37.1627 8.2705C38.1384 8.85539 37.827 11.9022 37.7094 13.0502C37.6973 13.1742 37.6834 13.2965 37.6696 13.4206C37.5623 14.416 37.4516 15.4434 37.6523 16.6551Z",fill:"black"}),l.createElement("path",{d:"M21.6129 5.93941C21.5212 5.93941 21.4278 5.92265 21.3395 5.88242C21.016 5.7383 20.8742 5.36792 21.023 5.05453C21.5039 4.03725 22.208 3.09875 23.0574 2.34124C23.3186 2.10829 23.7269 2.12337 23.9673 2.37811C24.2078 2.63117 24.1922 3.02668 23.9293 3.25963C23.2044 3.90653 22.6041 4.70762 22.1924 5.57573C22.0851 5.80198 21.8551 5.93773 21.6129 5.93941Z",fill:"black"}),l.createElement("path",{d:"M19.4429 5.57912C19.109 5.58247 18.8236 5.33443 18.7959 5.00596C18.6731 3.53619 18.6679 2.04631 18.7838 0.576537C18.8115 0.232976 19.1211 -0.0234375 19.474 0.0017011C19.8287 0.0285156 20.0934 0.326827 20.0674 0.670387C19.9567 2.0748 19.9619 3.49932 20.0795 4.90373C20.1089 5.24729 19.8442 5.54895 19.4896 5.57576C19.474 5.57576 19.4585 5.57744 19.4429 5.57744V5.57912Z",fill:"black"}),l.createElement("path",{d:"M17.2247 5.96646C16.9358 5.96981 16.6694 5.78044 16.595 5.49721C16.3217 4.45815 15.8044 3.47104 15.1003 2.64482C14.8737 2.37835 14.9135 1.98618 15.1868 1.76664C15.4619 1.5471 15.8667 1.58564 16.0933 1.85044C16.9168 2.81911 17.5223 3.97381 17.8406 5.18884C17.9288 5.52235 17.7195 5.86255 17.3752 5.94803C17.3233 5.96143 17.2732 5.96646 17.2213 5.96814L17.2247 5.96646Z",fill:"black"}))),l.createElement("defs",null,l.createElement("clipPath",{id:"clip0_12391_446"},l.createElement("rect",{width:39,height:26,fill:"white"})),l.createElement("clipPath",{id:"clip1_12391_446"},l.createElement("rect",{width:39,height:26,fill:"white"}))));function K1({onClick:t}){const{t:s}=p();return e.jsx(j,{tooltip:s(r.BRANDING$ALL_HANDS_AI),ariaLabel:s(r.BRANDING$ALL_HANDS_LOGO),onClick:t,children:e.jsx(V,{width:34,height:34})})}const Y1=t=>l.createElement("svg",{width:27,height:27,viewBox:"0 0 27 27",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},l.createElement("path",{d:"M24.5719 9.17199V14.8456M15.7404 3.4984C14.9543 3.12524 14.095 2.93164 13.2248 2.93164C12.3546 2.93164 11.4952 3.12524 10.7091 3.4984L3.11671 7.05801C1.46456 7.83189 1.46456 10.5121 3.11671 11.286L10.708 14.8456C11.4943 15.2189 12.3538 15.4126 13.2242 15.4126C14.0946 15.4126 14.9541 15.2189 15.7404 14.8456L23.3328 11.286C24.985 10.5121 24.985 7.83189 23.3328 7.05801L15.7404 3.4984Z",stroke:"currentColor",strokeWidth:1.8,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M5.28183 12.5762V18.3916C5.28183 21.7027 10.6082 23.356 13.2249 23.356C15.8415 23.356 21.1679 21.7027 21.1679 18.3916V12.5762",stroke:"currentColor",strokeWidth:1.8,strokeLinecap:"round",strokeLinejoin:"round"}));function Z1(){const{t}=p();return e.jsx(j,{tooltip:t(r.SIDEBAR$DOCS),ariaLabel:t(r.SIDEBAR$DOCS),href:"https://docs.all-hands.dev",children:e.jsx(Y1,{width:28,height:28,className:"text-[#9099AC]"})})}const W1=t=>l.createElement("svg",{width:27,height:26,viewBox:"0 0 27 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},l.createElement("g",{clipPath:"url(#clip0_40000158_408)"},l.createElement("path",{d:"M13.5381 1.83496C7.32618 1.83496 2.29074 6.8704 2.29074 13.0823C2.29074 19.2942 7.32618 24.3297 13.5381 24.3297C19.75 24.3297 24.7855 19.2942 24.7855 13.0823C24.7855 6.8704 19.75 1.83496 13.5381 1.83496Z",stroke:"currentColor",strokeWidth:1.8,strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M20.5007 12H14.5007V6C14.5007 5.73478 14.3953 5.48043 14.2078 5.29289C14.0203 5.10536 13.7659 5 13.5007 5C13.2355 5 12.9811 5.10536 12.7936 5.29289C12.6061 5.48043 12.5007 5.73478 12.5007 6V12H6.5007C6.23549 12 5.98113 12.1054 5.7936 12.2929C5.60606 12.4804 5.5007 12.7348 5.5007 13C5.5007 13.2652 5.60606 13.5196 5.7936 13.7071C5.98113 13.8946 6.23549 14 6.5007 14H12.5007V20C12.5007 20.2652 12.6061 20.5196 12.7936 20.7071C12.9811 20.8946 13.2355 21 13.5007 21C13.7659 21 14.0203 20.8946 14.2078 20.7071C14.3953 20.5196 14.5007 20.2652 14.5007 20V14H20.5007C20.7659 14 21.0203 13.8946 21.2078 13.7071C21.3953 13.5196 21.5007 13.2652 21.5007 13C21.5007 12.7348 21.3953 12.4804 21.2078 12.2929C21.0203 12.1054 20.7659 12 20.5007 12Z",fill:"currentColor"})),l.createElement("defs",null,l.createElement("clipPath",{id:"clip0_40000158_408"},l.createElement("rect",{width:26,height:26,fill:"white",transform:"translate(0.5)"}))));function z1({onClick:t}){const{t:s}=p(),n=s(r.CONVERSATION$START_NEW);return e.jsx(j,{tooltip:n,ariaLabel:n,onClick:t,testId:"new-project-button",children:e.jsx(W1,{width:28,height:28,className:"text-[#9099AC]"})})}function q1({onClick:t}){const{t:s}=p();return e.jsx(j,{testId:"settings-button",tooltip:s(r.SETTINGS$TITLE),ariaLabel:s(r.SETTINGS$TITLE),onClick:t,children:e.jsx(j1,{width:28,height:28})})}function Q1({testId:t,title:s,description:n,buttons:a}){return e.jsx(_1,{testId:t,title:s,description:n,buttons:[{text:a.danger.text,onClick:a.danger.onClick,className:"bg-danger"},{text:a.cancel.text,onClick:a.cancel.onClick,className:"bg-neutral-500"}]})}const X1=t=>{var d,u,C,x,h;const s=(d=t.get("llm-provider-input"))==null?void 0:d.toString(),n=(u=t.get("llm-model-input"))==null?void 0:u.toString(),a=`${s}/${n}`.toLowerCase(),o=(C=t.get("llm-api-key-input"))==null?void 0:C.toString(),i=(x=t.get("agent"))==null?void 0:x.toString(),c=(h=t.get("language"))==null?void 0:h.toString();return{LLM_MODEL:a,LLM_API_KEY:o,AGENT:i,LANGUAGE:c}},J1=t=>{var u,C,x;const s=Array.from(t.keys()),n=s.includes("use-advanced-options");let a,o,i=!1,c,d=!0;return n&&(a=(u=t.get("custom-model"))==null?void 0:u.toString(),o=(C=t.get("base-url"))==null?void 0:C.toString(),i=s.includes("confirmation-mode"),i&&(c=(x=t.get("security-analyzer"))==null?void 0:x.toString()),d=s.includes("enable-default-condenser")),{CUSTOM_LLM_MODEL:a,LLM_BASE_URL:o,CONFIRMATION_MODE:i,SECURITY_ANALYZER:c,ENABLE_DEFAULT_CONDENSER:d}},ee=t=>{var S,N;const{LLM_MODEL:s,LLM_API_KEY:n,AGENT:a,LANGUAGE:o}=X1(t),{CUSTOM_LLM_MODEL:i,LLM_BASE_URL:c,CONFIRMATION_MODE:d,SECURITY_ANALYZER:u,ENABLE_DEFAULT_CONDENSER:C}=J1(t),x=(S=t.get("github-token"))==null?void 0:S.toString(),h=(N=t.get("gitlab-token"))==null?void 0:N.toString(),g={};return x&&(g.github=x),h&&(g.gitlab=h),{LLM_MODEL:i||s,LLM_API_KEY_SET:!!n,AGENT:a,LANGUAGE:o,LLM_BASE_URL:c,CONFIRMATION_MODE:d,SECURITY_ANALYZER:u,ENABLE_DEFAULT_CONDENSER:C,PROVIDER_TOKENS:g,llm_api_key:n}};function te({settings:t,models:s,onClose:n}){const{mutate:a}=$(),o=B(),i=D(),{t:c}=p(),d=m.useRef(null),[u,C]=m.useState(!1),x=()=>{i.pathname.startsWith("/conversations/")&&o()},h=async E=>{const L=ee(E);await a(L,{onSuccess:()=>{n(),x(),b.capture("settings_saved",{LLM_MODEL:L.LLM_MODEL,LLM_API_KEY_SET:L.LLM_API_KEY_SET?"SET":"UNSET",REMOTE_RUNTIME_RESOURCE_FACTOR:L.REMOTE_RUNTIME_RESOURCE_FACTOR})}})},g=()=>{const E=new FormData(d.current??void 0);h(E)},S=E=>{E.preventDefault();const L=new FormData(E.currentTarget);i.pathname.startsWith("/conversations/")?C(!0):h(L)},N=t.LLM_API_KEY_SET;return e.jsxs("div",{children:[e.jsxs("form",{ref:d,"data-testid":"settings-form",className:"flex flex-col gap-6",onSubmit:S,children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(f1,{models:x1(s),currentModel:t.LLM_MODEL}),e.jsx(O1,{testId:"llm-api-key-input",name:"llm-api-key-input",label:c(r.SETTINGS_FORM$API_KEY),type:"password",className:"w-[680px]",placeholder:N?"<hidden>":"",startContent:N&&e.jsx(E1,{isSet:N})}),e.jsx(g1,{testId:"llm-api-key-help-anchor",text:c(r.SETTINGS$DONT_KNOW_API_KEY),linkText:c(r.SETTINGS$CLICK_FOR_INSTRUCTIONS),href:"https://docs.all-hands.dev/modules/usage/installation#getting-an-api-key"})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsx(T,{testId:"save-settings-button",type:"submit",variant:"primary",className:"w-full",children:c(r.BUTTON$SAVE)})})]}),u&&e.jsx(I,{children:e.jsx(Q1,{title:c(r.MODAL$END_SESSION_TITLE),description:c(r.MODAL$END_SESSION_MESSAGE),buttons:{danger:{text:c(r.BUTTON$END_SESSION),onClick:g},cancel:{text:c(r.BUTTON$CANCEL),onClick:()=>C(!1)}}})})]})}function se({onClose:t,settings:s}){var o;const n=S1(),{t:a}=p();return e.jsx(I,{children:e.jsxs("div",{"data-testid":"ai-config-modal",className:"bg-base-secondary min-w-[384px] p-6 rounded-xl flex flex-col gap-2 border border-tertiary",children:[n.error&&e.jsx("p",{className:"text-danger text-xs",children:n.error.message}),e.jsx("span",{className:"text-xl leading-6 font-semibold -tracking-[0.01em]",children:a(r.AI_SETTINGS$TITLE)}),e.jsxs("p",{className:"text-xs text-[#A3A3A3]",children:[a(r.SETTINGS$DESCRIPTION)," ",a(r.SETTINGS$FOR_OTHER_OPTIONS),e.jsx(r1,{"data-testid":"advanced-settings-link",to:"/settings",className:"underline underline-offset-2 text-white",children:a(r.SETTINGS$SEE_ADVANCED_SETTINGS)})]}),n.isLoading&&e.jsx("div",{className:"flex justify-center",children:e.jsx(G,{size:"small"})}),n.data&&e.jsx(te,{settings:s||M1,models:(o=n.data)==null?void 0:o.models,onClose:t})]})})}const ne=()=>{const{data:t}=s1();return U({queryKey:["user","conversations"],queryFn:M.getUserConversations,enabled:!!t})},ae=()=>{const t=w1();return X({mutationFn:s=>M.deleteUserConversation(s.conversationId),onMutate:async s=>{await t.cancelQueries({queryKey:["user","conversations"]});const n=t.getQueryData(["user","conversations"]);return t.setQueryData(["user","conversations"],a=>a==null?void 0:a.filter(o=>o.conversation_id!==s.conversationId)),{previousConversations:n}},onError:(s,n,a)=>{a!=null&&a.previousConversations&&t.setQueryData(["user","conversations"],a.previousConversations)},onSettled:()=>{t.invalidateQueries({queryKey:["user","conversations"]})}})};function oe({onConfirm:t,onCancel:s}){const{t:n}=p();return e.jsx(I,{children:e.jsxs(w,{className:"items-start border border-tertiary",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(F,{title:n(r.CONVERSATION$CONFIRM_DELETE)}),e.jsx(Q,{description:n(r.CONVERSATION$DELETE_WARNING)})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-full",onClick:a=>a.stopPropagation(),children:[e.jsx(T,{type:"button",variant:"primary",onClick:t,className:"w-full","data-testid":"confirm-button",children:n(r.ACTION$CONFIRM)}),e.jsx(T,{type:"button",variant:"secondary",onClick:s,className:"w-full","data-testid":"cancel-button",children:n(r.BUTTON$CANCEL)})]})]})})}function re({onConfirm:t,onClose:s}){const{t:n}=p();return e.jsx(I,{children:e.jsxs(w,{testID:"confirm-new-conversation-modal",children:[e.jsx(F,{title:n(r.CONVERSATION$EXIT_WARNING)}),e.jsxs("div",{className:"flex w-full gap-2",children:[e.jsx(Z,{text:n(r.ACTION$CONFIRM),onClick:t,className:"bg-[#C63143] flex-1"}),e.jsx(Z,{text:n(r.BUTTON$CANCEL),onClick:s,className:"bg-tertiary flex-1"})]})]})})}function ie({onClose:t}){const{t:s}=p(),{conversationId:n}=i1(),a=B(),o=q(t),[i,c]=m.useState(!1),[d,u]=m.useState(!1),[C,x]=m.useState(null),{data:h,isFetching:g,error:S}=ne(),{mutate:N}=ae(),{mutate:E}=T1(),L=f=>{c(!0),x(f)},O=()=>{C&&N({conversationId:C},{onSuccess:()=>{n===C&&a()}})},A=(f,v,_)=>{v!==_&&E({id:f,conversation:{title:_}})};return e.jsxs("div",{ref:o,"data-testid":"conversation-panel",className:"w-[350px] h-full border border-neutral-700 bg-base-secondary rounded-xl overflow-y-auto absolute",children:[g&&e.jsx("div",{className:"w-full h-full absolute flex justify-center items-center",children:e.jsx(G,{size:"small"})}),S&&e.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:e.jsx("p",{className:"text-danger",children:S.message})}),(h==null?void 0:h.length)===0&&e.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:e.jsx("p",{className:"text-neutral-400",children:s(r.CONVERSATION$NO_CONVERSATIONS)})}),h==null?void 0:h.map(f=>e.jsx(W,{to:`/conversations/${f.conversation_id}`,onClick:t,children:({isActive:v})=>e.jsx(I1,{isActive:v,onDelete:()=>L(f.conversation_id),onChangeTitle:_=>A(f.conversation_id,f.title,_),title:f.title,selectedRepository:f.selected_repository,lastUpdatedAt:f.last_updated_at,createdAt:f.created_at,status:f.status,conversationId:f.conversation_id})},f.conversation_id)),i&&e.jsx(oe,{onConfirm:()=>{O(),c(!1)},onCancel:()=>c(!1)}),d&&e.jsx(re,{onConfirm:()=>{a(),t()},onClose:()=>u(!1)})]})}function le({isOpen:t,children:s}){if(!t)return null;const n=document.getElementById("root-outlet");return n?k1.createPortal(e.jsx("div",{className:"absolute h-full w-full left-0 top-0 z-20 bg-black/80 rounded-xl",children:s}),n):null}function ce(){const{t}=p(),s=D(),n=p1(),a=B(),o=$1(),{data:i}=R(),{data:c,error:d,isError:u,isFetching:C}=J(),{mutateAsync:x}=z(),[h,g]=m.useState(!1),[S,N]=m.useState(!1),E=(i==null?void 0:i.FEATURE_FLAGS.HIDE_LLM_SETTINGS)&&(i==null?void 0:i.APP_MODE)==="saas";m.useEffect(()=>{E||(s.pathname==="/settings"?g(!1):!C&&u&&(d==null?void 0:d.status)!==404?e1("Something went wrong while fetching settings. Please reload the page."):(i==null?void 0:i.APP_MODE)==="oss"&&(d==null?void 0:d.status)===404&&g(!0))},[d==null?void 0:d.status,d,C,s.pathname]);const L=()=>{n(b1(y1.LOADING)),a()},O=async()=>{await x(),b.reset()};return e.jsxs(e.Fragment,{children:[e.jsxs("aside",{className:"h-[40px] md:h-auto px-1 flex flex-row md:flex-col gap-1",children:[e.jsxs("nav",{className:"flex flex-row md:flex-col items-center justify-between w-full h-auto md:w-auto md:h-full",children:[e.jsxs("div",{className:"flex flex-row md:flex-col items-center gap-[26px]",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(K1,{onClick:L})}),e.jsx(z1,{onClick:L}),e.jsx(j,{testId:"toggle-conversation-panel",tooltip:t(r.SIDEBAR$CONVERSATIONS),ariaLabel:t(r.SIDEBAR$CONVERSATIONS),onClick:()=>N(A=>!A),children:e.jsx(h1,{size:22,className:k(S?"text-white":"text-[#9099AC]")})})]}),e.jsxs("div",{className:"flex flex-row md:flex-col md:items-center gap-[26px] md:mb-4",children:[e.jsx(Z1,{}),e.jsx(W,{to:"/settings",className:({isActive:A})=>`${A?"text-white":"text-[#9099AC]"} mt-0.5 md:mt-0`,children:e.jsx(q1,{})}),e.jsx(H1,{user:o.data?{avatar_url:o.data.avatar_url}:void 0,onLogout:O,isLoading:o.isFetching})]})]}),S&&e.jsx(le,{isOpen:S,children:e.jsx(ie,{onClose:()=>N(!1)})})]}),h&&e.jsx(se,{settings:c,onClose:()=>g(!1)})]})}function de({onChange:t}){const{t:s}=p();return e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",onChange:t}),e.jsxs("span",{children:[s(r.TOS$ACCEPT)," ",e.jsx("a",{href:"https://www.all-hands.dev/tos",target:"_blank",rel:"noopener noreferrer",className:"underline underline-offset-2 text-blue-500 hover:text-blue-700",children:s(r.TOS$TERMS)})]})]})}const Ce=t=>l.createElement("svg",{width:22,height:22,viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},l.createElement("path",{d:"M15.359 21V17.319C15.3974 16.8654 15.3314 16.4095 15.1651 15.9814C14.9989 15.5534 14.7363 15.1631 14.3949 14.8364C17.6154 14.5035 21 13.3716 21 8.17826C20.9997 6.85027 20.4489 5.57321 19.4615 4.61139C19.9291 3.44954 19.896 2.16532 19.3692 1.02548C19.3692 1.02548 18.159 0.692576 15.359 2.43321C13.0082 1.84237 10.5302 1.84237 8.17949 2.43321C5.37949 0.692576 4.16923 1.02548 4.16923 1.02548C3.64244 2.16532 3.60938 3.44954 4.07692 4.61139C3.08218 5.58034 2.53079 6.86895 2.53846 8.2068C2.53846 13.3621 5.92308 14.494 9.14359 14.865C8.80615 15.1883 8.54591 15.574 8.3798 15.9968C8.2137 16.4196 8.14544 16.8701 8.17949 17.319V21M8.17949 18.1465C3.05128 19.5732 3.05128 15.7686 1 15.293L8.17949 18.1465Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),ue=t=>l.createElement("svg",{width:22,height:22,viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},l.createElement("path",{d:"M11 21L16.5 8H5.5L11 21Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M1 8L3.5 15.5L11 21L18.5 15.5L21 8",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M1 8L5.5 8L8.25 1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M21 8L16.5 8L13.75 1",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}));function me({githubAuthUrl:t,appMode:s}){const{t:n}=p(),[a,o]=m.useState(!1),i=t1({appMode:s||null,identityProvider:"gitlab"}),c=()=>{t&&(y(!0),window.location.href=t)},d=()=>{i&&(y(!0),window.location.href=i)};return e.jsx(I,{children:e.jsxs(w,{className:"border border-tertiary",children:[e.jsx(V,{width:68,height:46}),e.jsx("div",{className:"flex flex-col gap-2 w-full items-center text-center",children:e.jsx("h1",{className:"text-2xl font-bold",children:n(r.AUTH$SIGN_IN_WITH_IDENTITY_PROVIDER)})}),e.jsx(de,{onChange:()=>o(u=>!u)}),e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsx(T,{isDisabled:!a,type:"button",variant:"primary",onClick:c,className:"w-full",startContent:e.jsx(Ce,{width:20,height:20}),children:n(r.GITHUB$CONNECT_TO_GITHUB)}),e.jsx(T,{isDisabled:!a,type:"button",variant:"primary",onClick:d,className:"w-full",startContent:e.jsx(ue,{width:20,height:20}),children:n(r.GITLAB$CONNECT_TO_GITLAB)})]})]})})}function he({onClose:t}){const{t:s}=p(),{mutate:n}=$(),a=async o=>{o.preventDefault();const c=new FormData(o.currentTarget).get("analytics")==="on";n({user_consents_to_analytics:c},{onSuccess:()=>{y(c),t()}})};return e.jsx(I,{children:e.jsx("form",{"data-testid":"user-capture-consent-form",onSubmit:a,className:"flex flex-col gap-2",children:e.jsxs(w,{className:"border border-tertiary",children:[e.jsx(F,{title:s(r.ANALYTICS$TITLE)}),e.jsx(Q,{children:s(r.ANALYTICS$DESCRIPTION)}),e.jsxs("label",{className:"flex gap-2 items-center self-start",children:[e.jsx("input",{name:"analytics",type:"checkbox",defaultChecked:!0}),s(r.ANALYTICS$SEND_ANONYMOUS_DATA)]}),e.jsx(T,{testId:"confirm-preferences",type:"submit",variant:"primary",className:"w-full",children:s(r.ANALYTICS$CONFIRM_PREFERENCES)})]})})})}const pe=()=>{const{mutate:t}=$();return{migrateUserConsent:m.useCallback(async n=>{const a=localStorage.getItem("analytics-consent");a&&(n==null||n.handleAnalyticsWasPresentInLocalStorage(),await t({user_consents_to_analytics:a==="true"},{onSuccess:()=>{y(a==="true")}}),localStorage.removeItem("analytics-consent"))},[])}};function fe(){const{t}=p(),{mutate:s,isPending:n}=X({mutationFn:M.createBillingSessionResponse,onSuccess:a=>{window.location.href=a},onError:()=>{e1(t(r.BILLING$ERROR_WHILE_CREATING_SESSION))}});return e.jsx(I,{children:e.jsxs(w,{className:"border border-tertiary",children:[e.jsx(V,{width:68,height:46}),e.jsxs("div",{className:"flex flex-col gap-2 w-full items-center text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:t(r.BILLING$YOUVE_GOT_50)}),e.jsx("p",{children:e.jsx(v1,{i18nKey:"BILLING$CLAIM_YOUR_50",components:{b:e.jsx("strong",{})}})})]}),e.jsx(T,{testId:"proceed-to-stripe-button",type:"submit",variant:"primary",className:"w-full",isDisabled:n,onClick:s,children:t(r.BILLING$PROCEED_TO_STRIPE)})]})})}const Xe=a1(function(){const s=C1(),{t:n}=p();return u1(s)?e.jsxs("div",{children:[e.jsx("h1",{children:s.status}),e.jsx("p",{children:s.statusText}),e.jsx("pre",{children:s.data instanceof Object?JSON.stringify(s.data):s.data})]}):s instanceof Error?e.jsxs("div",{children:[e.jsx("h1",{children:n(r.ERROR$GENERIC)}),e.jsx("pre",{children:s.message})]}):e.jsx("div",{children:e.jsx("h1",{children:n(r.ERROR$UNKNOWN)})})}),Je=o1(function(){var A,f,v,_,H,K,Y;const s=l1(),{pathname:n}=D(),[a]=c1(),{data:o}=J(),{error:i,isFetching:c}=D1(),{migrateUserConsent:d}=pe(),{t:u}=p(),C=R(),{data:x,isFetching:h,isError:g}=s1(),S=U1({appMode:((A=C.data)==null?void 0:A.APP_MODE)||null,gitHubClientId:((f=C.data)==null?void 0:f.GITHUB_CLIENT_ID)||null}),[N,E]=m.useState(!1);m.useEffect(()=>{o!=null&&o.LANGUAGE&&m1.changeLanguage(o.LANGUAGE)},[o==null?void 0:o.LANGUAGE]),m.useEffect(()=>{const n1=(o==null?void 0:o.USER_CONSENTS_TO_ANALYTICS)===null;E(n1)},[o]),m.useEffect(()=>{d({handleAnalyticsWasPresentInLocalStorage:()=>{E(!1)}})},[]),m.useEffect(()=>{(i==null?void 0:i.status)===402&&n!=="/"?s("/"):!c&&a.get("free_credits")==="success"&&(R1(u(r.BILLING$YOURE_IN)),a.delete("free_credits"),s("/"))},[i==null?void 0:i.status,n,c]);const O=!h&&!(!!x&&!g)&&((v=C.data)==null?void 0:v.APP_MODE)==="saas";return e.jsxs("div",{"data-testid":"root-layout",className:"bg-base p-3 h-screen md:min-w-[1024px] flex flex-col md:flex-row gap-3",children:[e.jsx(ce,{}),e.jsx("div",{id:"root-outlet",className:"h-[calc(100%-50px)] md:h-full w-full relative overflow-auto",children:e.jsx(d1,{})}),O&&e.jsx(me,{githubAuthUrl:S,appMode:(_=C.data)==null?void 0:_.APP_MODE}),((H=C.data)==null?void 0:H.APP_MODE)==="oss"&&N&&e.jsx(he,{onClose:()=>{E(!1)}}),((K=C.data)==null?void 0:K.FEATURE_FLAGS.ENABLE_BILLING)&&((Y=C.data)==null?void 0:Y.APP_MODE)==="saas"&&(o==null?void 0:o.IS_NEW_USER)&&e.jsx(fe,{})]})});export{Xe as ErrorBoundary,Je as default};
