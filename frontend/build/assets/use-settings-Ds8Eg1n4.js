import{u as r}from"./useQuery-BQp87qj0.js";import{R as o}from"./chunk-ZYFC6VSF-CV8XXl5-.js";import{p as A}from"./module-D8R257Cm.js";import{O as n}from"./open-hands-C0cV1FsE.js";import{u as S,a as i}from"./use-config-Cu-DTsjW.js";import{f as T}from"./open-hands-axios-BHmDa7Dt.js";const I=()=>{const{data:e}=S(),t=i(),s=e?.APP_MODE;return r({queryKey:["user","authenticated",s],queryFn:async()=>{try{return await n.authenticate(s),!0}catch(_){if(T.isAxiosError(_)&&_.response?.status===401)return!1;throw _}},enabled:!!s&&!t,staleTime:1e3*60*5,gcTime:1e3*60*15,retry:!1,meta:{disableToast:!0}})},a={LLM_MODEL:"openhands/claude-sonnet-4-20250514",LLM_BASE_URL:"",AGENT:"CodeActAgent",LANGUAGE:"en",LLM_API_KEY_SET:!1,SEARCH_API_KEY_SET:!1,CONFIRMATION_MODE:!1,SECURITY_ANALYZER:"",REMOTE_RUNTIME_RESOURCE_FACTOR:1,PROVIDER_TOKENS_SET:{},ENABLE_DEFAULT_CONDENSER:!0,ENABLE_SOUND_NOTIFICATIONS:!1,USER_CONSENTS_TO_ANALYTICS:!1,ENABLE_PROACTIVE_CONVERSATION_STARTERS:!1,ENABLE_SOLVABILITY_ANALYSIS:!1,SEARCH_API_KEY:"",IS_NEW_USER:!0,MAX_BUDGET_PER_TASK:null,EMAIL:"",EMAIL_VERIFIED:!0,MCP_CONFIG:{sse_servers:[],stdio_servers:[]},GIT_USER_NAME:"openhands",GIT_USER_EMAIL:"openhands@all-hands.dev"},u=async()=>{const e=await n.getSettings();return{LLM_MODEL:e.llm_model,LLM_BASE_URL:e.llm_base_url,AGENT:e.agent,LANGUAGE:e.language,CONFIRMATION_MODE:e.confirmation_mode,SECURITY_ANALYZER:e.security_analyzer,LLM_API_KEY_SET:e.llm_api_key_set,SEARCH_API_KEY_SET:e.search_api_key_set,REMOTE_RUNTIME_RESOURCE_FACTOR:e.remote_runtime_resource_factor,PROVIDER_TOKENS_SET:e.provider_tokens_set,ENABLE_DEFAULT_CONDENSER:e.enable_default_condenser,ENABLE_SOUND_NOTIFICATIONS:e.enable_sound_notifications,ENABLE_PROACTIVE_CONVERSATION_STARTERS:e.enable_proactive_conversation_starters,ENABLE_SOLVABILITY_ANALYSIS:e.enable_solvability_analysis,USER_CONSENTS_TO_ANALYTICS:e.user_consents_to_analytics,SEARCH_API_KEY:e.search_api_key||"",MAX_BUDGET_PER_TASK:e.max_budget_per_task,EMAIL:e.email||"",EMAIL_VERIFIED:e.email_verified,MCP_CONFIG:e.mcp_config,GIT_USER_NAME:e.git_user_name||a.GIT_USER_NAME,GIT_USER_EMAIL:e.git_user_email||a.GIT_USER_EMAIL,IS_NEW_USER:!1}},d=()=>{const e=i(),{data:t}=I(),s=r({queryKey:["settings"],queryFn:u,retry:(_,E)=>E.status!==404,refetchOnWindowFocus:!1,staleTime:1e3*60*5,gcTime:1e3*60*15,enabled:!e&&!!t,meta:{disableToast:!0}});return o.useEffect(()=>{s.isFetched&&s.data?.LLM_API_KEY_SET&&A.capture("user_activated")},[s.data?.LLM_API_KEY_SET,s.isFetched]),s.error?.status===404?{data:a,error:s.error,isError:s.isError,isLoading:s.isLoading,isFetching:s.isFetching,isFetched:s.isFetched,isSuccess:s.isSuccess,status:s.status,fetchStatus:s.fetchStatus,refetch:s.refetch}:s};export{a as D,I as a,d as u};
